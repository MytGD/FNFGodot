[gd_scene load_steps=6 format=3 uid="uid://eonsf5cks44n"]

[ext_resource type="Script" uid="uid://cigpxll0rg8br" path="res://source/states/ChartEditor/ChartEditor.gd" id="1_twph6"]
[ext_resource type="PackedScene" uid="uid://b1a3jlb7iu130" path="res://scenes/objects/ButtonRange.tscn" id="2_p8wo6"]
[ext_resource type="Script" uid="uid://cvvli26q7wviq" path="res://source/general/popup/PopupDir.gd" id="3_nkmqi"]
[ext_resource type="Script" uid="uid://bxu1ahcd17pxh" path="res://source/objects/Sprite/SolidSprite.gd" id="4_4ubu6"]

[sub_resource type="GDScript" id="GDScript_4ubu6"]
resource_name = "StagePop"
script/source = "extends MenuButton

func _ready() -> void:
	var last_mod: String = ''
	var popup = get_popup()
	for i in Paths.getFilesAt('stages',true,'.json'):
		var mod = Paths.getModFolder(i)
		if !mod: mod = Paths.game_name
		if last_mod != mod:
			popup.add_separator(mod)
			last_mod = mod
		popup.add_item(i.get_file())
	popup.min_size.x = max(popup.size.x,Paths.game_name.length()*15)
	
	if !Engine.is_editor_hint(): set_script(null)
"

[node name="Charter" type="Node"]
script = ExtResource("1_twph6")
song_json = &"test"

[node name="ChessControl" type="Node2D" parent="."]

[node name="MouseRect" type="Node2D" parent="ChessControl"]
modulate = Color(1, 1, 1, 0)
position = Vector2(22, 120)
scale = Vector2(30, 30)
script = ExtResource("4_4ubu6")
metadata/_custom_type_script = "uid://bxu1ahcd17pxh"

[node name="TabContainer" type="TabContainer" parent="."]
self_modulate = Color(1, 1, 1, 0.470588)
offset_left = 737.0
offset_top = 257.0
offset_right = 1279.0
offset_bottom = 721.0
current_tab = 2
clip_tabs = false
tab_focus_mode = 0

[node name="Section" type="Panel" parent="TabContainer"]
visible = false
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
metadata/_tab_index = 0

[node name="Text" type="Label" parent="TabContainer/Section"]
layout_mode = 0
offset_left = 8.0
offset_top = 8.0
offset_right = 252.0
offset_bottom = 439.0
text = "====FOCUS====


====Section Options====




=====Section Copy=====






====Section Notes Flip====



===Section Erase===="

[node name="HitSection" type="CheckBox" parent="TabContainer/Section"]
layout_mode = 0
offset_left = 5.0
offset_top = 23.0
offset_right = 183.0
offset_bottom = 54.0
tooltip_text = "If the section focused on the boyfriend."
focus_mode = 0
text = "Must Hit Section"

[node name="GFSection" type="CheckBox" parent="TabContainer/Section"]
layout_mode = 0
offset_left = 189.0
offset_top = 24.0
offset_right = 311.0
offset_bottom = 55.0
tooltip_text = "If the section focused on the girlfriend."
focus_mode = 0
text = "GF Section"

[node name="Erase Section" type="Button" parent="TabContainer/Section"]
layout_mode = 0
offset_left = 324.0
offset_top = 225.0
offset_right = 454.0
offset_bottom = 256.0
focus_mode = 0
text = "Erase Section"

[node name="SectionCopyOffset" parent="TabContainer/Section" instance=ExtResource("2_p8wo6")]
custom_minimum_size = Vector2(378, 40)
layout_mode = 0
anchors_preset = 0
anchor_bottom = 0.0
offset_left = 6.0
offset_top = 179.0
offset_right = 384.0
offset_bottom = 219.0
text = "Section Copy Offset:"
value = 1.0
int_value = true

[node name="Button" type="Button" parent="TabContainer/Section"]
layout_mode = 0
offset_left = 8.0
offset_top = 222.0
offset_right = 176.0
offset_bottom = 253.0
focus_mode = 0
text = "Copy Last Section"

[node name="ChangeBPM" type="CheckBox" parent="TabContainer/Section"]
layout_mode = 0
offset_left = 270.0
offset_top = 99.0
offset_right = 400.0
offset_bottom = 130.0
tooltip_text = "Change the bpm starting  from this section."
focus_mode = 0
text = "Change BPM"

[node name="NewBPM" parent="TabContainer/Section" instance=ExtResource("2_p8wo6")]
custom_minimum_size = Vector2(265, 40)
layout_mode = 0
anchors_preset = 0
anchor_bottom = 0.0
offset_left = 8.0
offset_top = 94.0
offset_right = 273.0
offset_bottom = 134.0
text = "New BPM:"

[node name="Swap Section" type="Button" parent="TabContainer/Section"]
layout_mode = 0
offset_left = 190.0
offset_top = 224.0
offset_right = 311.0
offset_bottom = 255.0
focus_mode = 0
text = "Swap Section"

[node name="Erase Notes Section" type="Button" parent="TabContainer/Section"]
layout_mode = 0
offset_left = 9.0
offset_top = 375.0
offset_right = 121.0
offset_bottom = 406.0
focus_mode = 0
text = "Erase Notes"

[node name="Erase Events Section" type="Button" parent="TabContainer/Section"]
layout_mode = 0
offset_left = 127.0
offset_top = 375.0
offset_right = 323.0
offset_bottom = 407.0
focus_mode = 0
text = "Erase Events Section"

[node name="Flip Notes" type="Button" parent="TabContainer/Section"]
layout_mode = 0
offset_left = 9.0
offset_top = 314.0
offset_right = 111.0
offset_bottom = 337.0
focus_mode = 0
text = "Flip Notes"

[node name="Flip Player Notes" type="Button" parent="TabContainer/Section"]
layout_mode = 0
offset_left = 118.0
offset_top = 314.0
offset_right = 286.0
offset_bottom = 337.0
focus_mode = 0
text = "Flip Player Notes"

[node name="Flip Opponent Notes" type="Button" parent="TabContainer/Section"]
layout_mode = 0
offset_left = 293.0
offset_top = 313.0
offset_right = 480.0
offset_bottom = 336.0
focus_mode = 0
text = "Flip Opponent Notes"

[node name="Note" type="Panel" parent="TabContainer"]
visible = false
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
metadata/_tab_index = 1

[node name="Text" type="Label" parent="TabContainer/Note"]
layout_mode = 0
offset_right = 197.0
offset_bottom = 699.0
text = "------Note Data------

Strum Time:





Note Type:

------Strums------
Show Strums(Editor):

------Skins------

Arrow Style:

Splash Style:



"

[node name="NoteType" type="MenuButton" parent="TabContainer/Note"]
layout_mode = 0
offset_left = 96.0
offset_top = 141.0
offset_right = 178.0
offset_bottom = 164.0
text = "None"
flat = false
script = ExtResource("3_nkmqi")
dir_to_look = "custom_notetypes"
filters = PackedStringArray(".gd")

[node name="StrumTime" type="LineEdit" parent="TabContainer/Note"]
layout_mode = 0
offset_left = 104.0
offset_top = 31.0
offset_right = 201.0
offset_bottom = 67.0

[node name="SustainLength" parent="TabContainer/Note" instance=ExtResource("2_p8wo6")]
layout_mode = 0
anchors_preset = 0
anchor_bottom = 0.0
offset_left = 2.0
offset_top = 92.0
offset_right = 143.0
offset_bottom = 107.0
text = "Sustain Length:"

[node name="ShowStrums" type="CheckBox" parent="TabContainer/Note"]
layout_mode = 0
offset_left = 189.0
offset_top = 192.0
offset_right = 213.0
offset_bottom = 216.0
focus_mode = 0

[node name="Event" type="Panel" parent="TabContainer"]
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
metadata/_tab_index = 2

[node name="Info" type="Label" parent="TabContainer/Event"]
layout_mode = 0
offset_left = 6.0
offset_top = 20.0
offset_right = 140.0
offset_bottom = 392.0
text = "Event: 




------Variables------









------DESCRIPTION-----"

[node name="Events" type="MenuButton" parent="TabContainer/Event"]
layout_mode = 0
offset_left = 59.0
offset_top = 17.0
offset_right = 199.0
offset_bottom = 48.0
flat = false
script = ExtResource("3_nkmqi")
dir_to_look = "custom_events"
filters = PackedStringArray("json", "txt")

[node name="VariablesContainer" type="ScrollContainer" parent="TabContainer/Event"]
custom_minimum_size = Vector2(535, 155)
layout_mode = 0
offset_left = 1.0
offset_top = 126.0
offset_right = 537.0
offset_bottom = 281.0

[node name="Grid" type="Control" parent="TabContainer/Event/VariablesContainer"]
layout_mode = 2

[node name="EventDescription" type="RichTextLabel" parent="TabContainer/Event"]
layout_mode = 0
offset_left = 3.0
offset_top = 331.0
offset_right = 539.0
offset_bottom = 551.0
mouse_force_pass_scroll_events = false

[node name="SelectEventText" type="Label" parent="TabContainer/Event"]
visible = false
top_level = true
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 834.0
offset_top = 441.0
offset_right = -213.0
offset_bottom = -256.0
scale = Vector2(1.725, 1.725)
text = "SELECT/CREATE A EVENT FIRST"

[node name="AddEvent" type="Button" parent="TabContainer/Event"]
layout_mode = 0
offset_left = 213.0
offset_top = 18.0
offset_right = 341.0
offset_bottom = 49.0
text = "Add Event"

[node name="RemoveEvent" type="Button" parent="TabContainer/Event"]
layout_mode = 0
offset_left = 350.0
offset_top = 18.0
offset_right = 480.0
offset_bottom = 49.0
text = "Remove Event"

[node name="EventIndex" parent="TabContainer/Event" instance=ExtResource("2_p8wo6")]
layout_mode = 0
anchors_preset = 0
anchor_bottom = 0.0
offset_left = 5.0
offset_top = 57.0
offset_right = 236.0
offset_bottom = 97.0
text = "Event Selected:"
suffix = "/0"
limit_min = true
limit_max = true
int_value = true

[node name="Song" type="Panel" parent="TabContainer"]
visible = false
self_modulate = Color(1, 1, 1, 0)
clip_contents = true
layout_mode = 2
metadata/_tab_index = 3

[node name="Label" type="Label" parent="TabContainer/Song"]
layout_mode = 0
offset_left = 8.0
offset_top = 5.0
offset_right = 539.0
offset_bottom = 391.0
text = "====== Song ======

SONG:






===== Audio =====



===== Stage =====

bf:               gf:               dad:


stage: "

[node name="BPM" parent="TabContainer/Song" instance=ExtResource("2_p8wo6")]
layout_mode = 0
anchors_preset = 0
anchor_bottom = 0.0
offset_left = 8.0
offset_top = 89.0
offset_right = 46.0
offset_bottom = 104.0
text = "BPM:"

[node name="Song" type="LineEdit" parent="TabContainer/Song"]
layout_mode = 0
offset_left = 55.0
offset_top = 36.0
offset_right = 231.0
offset_bottom = 67.0

[node name="Reload Audio" type="Button" parent="TabContainer/Song"]
layout_mode = 0
offset_left = 7.0
offset_top = 190.0
offset_right = 128.0
offset_bottom = 223.0
text = "Reload Audio"

[node name="bfCharacters" type="MenuButton" parent="TabContainer/Song"]
layout_mode = 0
offset_left = 40.0
offset_top = 270.0
offset_right = 166.0
offset_bottom = 301.0
flat = false
clip_text = true

[node name="dadCharacters" type="MenuButton" parent="TabContainer/Song"]
layout_mode = 0
offset_left = 385.0
offset_top = 271.0
offset_right = 511.0
offset_bottom = 302.0
flat = false
clip_text = true

[node name="gfCharacters" type="MenuButton" parent="TabContainer/Song"]
layout_mode = 0
offset_left = 213.0
offset_top = 271.0
offset_right = 339.0
offset_bottom = 302.0
flat = false
clip_text = true

[node name="SaveToChart" type="Button" parent="TabContainer/Song"]
layout_mode = 0
offset_left = 241.0
offset_top = 33.0
offset_right = 399.0
offset_bottom = 64.0
focus_mode = 0
text = "Save Chart as..."

[node name="Save Chart" type="Button" parent="TabContainer/Song"]
visible = false
layout_mode = 0
offset_left = 418.0
offset_top = 52.0
offset_right = 509.0
offset_bottom = 83.0
focus_mode = 0
text = "Save Chart"

[node name="Speed" parent="TabContainer/Song" instance=ExtResource("2_p8wo6")]
layout_mode = 0
anchors_preset = 0
anchor_bottom = 0.0
offset_left = 8.0
offset_top = 135.0
offset_right = 65.0
offset_bottom = 150.0
text = "Speed:"

[node name="Stage" type="MenuButton" parent="TabContainer/Song"]
layout_mode = 0
offset_left = 68.0
offset_top = 323.0
offset_right = 199.0
offset_bottom = 354.0
flat = false
clip_text = true
script = SubResource("GDScript_4ubu6")

[node name="Editor" type="Panel" parent="TabContainer"]
visible = false
self_modulate = Color(1, 1, 1, 0)
layout_mode = 2
metadata/_tab_index = 4

[node name="Text" type="Label" parent="TabContainer/Editor"]
layout_mode = 0
offset_left = 8.0
offset_top = 8.0
offset_right = 544.0
offset_bottom = 553.0
text = "------Chart------




Auto Change Section:


------AUDIO------

Player Voice:               Instrumental:

Opponent Voice:


Waveform:
"

[node name="OponnentVoice" type="HSlider" parent="TabContainer/Editor"]
layout_mode = 0
offset_left = 150.0
offset_top = 225.0
offset_right = 262.0
offset_bottom = 241.0
focus_mode = 0
max_value = 1.0
step = 0.1
value = 1.0

[node name="PlayerVoice" type="HSlider" parent="TabContainer/Editor"]
layout_mode = 0
offset_left = 397.0
offset_top = 189.0
offset_right = 511.0
offset_bottom = 205.0
focus_mode = 0
max_value = 1.0
step = 0.1
value = 1.0

[node name="AutoChangeSection" type="CheckBox" parent="TabContainer/Editor"]
layout_mode = 0
offset_left = 196.0
offset_top = 95.0
offset_right = 220.0
offset_bottom = 119.0
focus_mode = 0
button_pressed = true

[node name="Instrumental" type="HSlider" parent="TabContainer/Editor"]
layout_mode = 0
offset_left = 132.0
offset_top = 189.0
offset_right = 243.0
offset_bottom = 205.0
max_value = 1.0
step = 0.1
value = 1.0

[node name="NewChart" type="Button" parent="TabContainer/Editor"]
layout_mode = 0
offset_left = 10.0
offset_top = 37.0
offset_right = 128.0
offset_bottom = 68.0
focus_mode = 0
text = "New Chart"

[node name="LoadChart" type="Button" parent="TabContainer/Editor"]
layout_mode = 0
offset_left = 137.0
offset_top = 37.0
offset_right = 240.0
offset_bottom = 68.0
focus_mode = 0
text = "Load Chart"

[node name="ReloadChart" type="Button" parent="TabContainer/Editor"]
layout_mode = 0
offset_left = 245.0
offset_top = 37.0
offset_right = 353.0
offset_bottom = 68.0
focus_mode = 0
text = "Reload Chart"

[node name="CreateChart" type="Panel" parent="TabContainer/Editor"]
visible = false
layout_mode = 0
offset_left = -196.0
offset_top = -19.0
offset_right = 168.0
offset_bottom = 288.0

[node name="ColorRect" type="ColorRect" parent="TabContainer/Editor/CreateChart"]
self_modulate = Color(0, 0, 0, 0.533333)
show_behind_parent = true
layout_mode = 0
offset_left = -541.0
offset_top = -150.0
offset_right = 736.0
offset_bottom = 570.0
color = Color(0.0588235, 0.0588235, 0.0588235, 0.701961)

[node name="Label" type="Label" parent="TabContainer/Editor/CreateChart"]
layout_mode = 0
offset_left = 4.0
offset_top = 5.0
offset_right = 313.0
offset_bottom = 222.0
text = "                                Create Chart


Song:

BPM:"

[node name="Load Song Chart" type="Button" parent="TabContainer/Editor/CreateChart"]
layout_mode = 0
offset_left = 204.0
offset_top = 84.0
offset_right = 292.0
offset_bottom = 115.0
focus_mode = 0
text = "Load Song"

[node name="SongChart" type="LineEdit" parent="TabContainer/Editor/CreateChart"]
layout_mode = 0
offset_left = 49.0
offset_top = 84.0
offset_right = 193.0
offset_bottom = 115.0

[node name="NewBpm" parent="TabContainer/Editor/CreateChart" instance=ExtResource("2_p8wo6")]
layout_mode = 0
anchors_preset = 0
anchor_bottom = 0.0
offset_left = 44.0
offset_top = 127.0
offset_right = 275.0
offset_bottom = 176.0

[node name="CreateChart" type="Button" parent="TabContainer/Editor/CreateChart"]
layout_mode = 0
offset_left = 72.0
offset_top = 270.0
offset_right = 132.0
offset_bottom = 301.0
focus_mode = 0
text = "Create"

[node name="CancelChart" type="Button" parent="TabContainer/Editor/CreateChart"]
layout_mode = 0
offset_left = 221.0
offset_top = 268.0
offset_right = 281.0
offset_bottom = 299.0
focus_mode = 0
text = "Cancel"

[node name="WaveformMenu" type="MenuButton" parent="TabContainer/Editor"]
layout_mode = 0
offset_left = 95.0
offset_top = 275.0
offset_right = 222.0
offset_bottom = 306.0
flat = false
item_count = 4
popup/item_0/id = 0
popup/item_1/text = "Inst"
popup/item_1/id = 1
popup/item_2/text = "Voices"
popup/item_2/id = 2
popup/item_3/text = "Voices Opponent"
popup/item_3/id = 3

[node name="Editor Info" type="TabContainer" parent="."]
offset_left = 743.0
offset_right = 1280.0
offset_bottom = 141.0
current_tab = 0
tabs_position = 1
tab_focus_mode = 0

[node name="Song Info" type="TabBar" parent="Editor Info"]
layout_mode = 2
focus_mode = 0
metadata/_tab_index = 0

[node name="SongInfo" type="Label" parent="Editor Info/Song Info"]
layout_mode = 0
offset_left = -1.0
offset_top = 15.0
offset_right = 535.0
offset_bottom = 107.0

[node name="Shortcuts" type="TabBar" parent="Editor Info"]
visible = false
layout_mode = 2
focus_mode = 0
metadata/_tab_index = 1

[node name="Label" type="Label" parent="Editor Info/Shortcuts"]
layout_mode = 0
offset_left = 8.0
offset_top = 32.0
offset_right = 121.0
offset_bottom = 87.0
text = "X : Zoom In

Z : Zoom Out"

[connection signal="toggled" from="TabContainer/Section/HitSection" to="." method="_on_hit_section_toggled"]
[connection signal="button_down" from="TabContainer/Section/Erase Section" to="." method="eraseSection"]
[connection signal="button_down" from="TabContainer/Section/Button" to="." method="copyLastSection"]
[connection signal="toggled" from="TabContainer/Section/ChangeBPM" to="." method="_on_change_bpm_toggled"]
[connection signal="value_changed" from="TabContainer/Section/NewBPM" to="." method="changeBpm"]
[connection signal="button_up" from="TabContainer/Section/Swap Section" to="." method="swapNoteSection"]
[connection signal="button_down" from="TabContainer/Section/Erase Notes Section" to="." method="eraseNotes"]
[connection signal="button_down" from="TabContainer/Section/Erase Events Section" to="." method="eraseEvents"]
[connection signal="button_down" from="TabContainer/Section/Flip Notes" to="." method="flipAllNotes"]
[connection signal="button_down" from="TabContainer/Section/Flip Player Notes" to="." method="flipPlayerNotesDir"]
[connection signal="button_down" from="TabContainer/Section/Flip Opponent Notes" to="." method="flipNotes"]
[connection signal="value_added" from="TabContainer/Note/SustainLength" to="." method="_on_sustain_length_value_added"]
[connection signal="toggled" from="TabContainer/Note/ShowStrums" to="." method="_on_show_strums_toggled"]
[connection signal="button_down" from="TabContainer/Event/AddEvent" to="." method="_on_add_event_button_down"]
[connection signal="button_up" from="TabContainer/Event/RemoveEvent" to="." method="_on_remove_event_button_up"]
[connection signal="value_changed" from="TabContainer/Event/EventIndex" to="." method="_on_event_index_value_changed"]
[connection signal="value_changed" from="TabContainer/Song/BPM" to="." method="changeSongBpm"]
[connection signal="button_down" from="TabContainer/Song/Reload Audio" to="." method="loadAudioStreams"]
[connection signal="button_down" from="TabContainer/Song/SaveToChart" to="." method="_on_save_to_chart_button_down"]
[connection signal="button_down" from="TabContainer/Song/Save Chart" to="." method="_on_save_chart_button_down"]
[connection signal="value_changed" from="TabContainer/Song/Speed" to="." method="changeSongSpeed"]
[connection signal="toggled" from="TabContainer/Editor/AutoChangeSection" to="." method="_on_auto_change_section_toggled"]
[connection signal="button_down" from="TabContainer/Editor/NewChart" to="." method="_on_new_chart_button_down"]
[connection signal="button_down" from="TabContainer/Editor/LoadChart" to="." method="_on_load_chart_button_down"]
[connection signal="button_down" from="TabContainer/Editor/ReloadChart" to="." method="_load_song_data"]
[connection signal="button_down" from="TabContainer/Editor/CreateChart/Load Song Chart" to="." method="_on_load_song_chart_button_down"]
[connection signal="button_down" from="TabContainer/Editor/CreateChart/CreateChart" to="." method="createChart"]
[connection signal="button_down" from="TabContainer/Editor/CreateChart/CreateChart" to="TabContainer/Editor" method="hide"]
[connection signal="button_down" from="TabContainer/Editor/CreateChart/CancelChart" to="TabContainer/Editor/CreateChart" method="hide"]
